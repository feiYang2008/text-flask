<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text Recognition</title>
    <link href="../source/css/semantic.min.css" type="text/css" rel="stylesheet">
    <link href='../source/css/index.css' type="text/css" rel="stylesheet"/>
    <script src='../source/js/jQuery.min.js'></script>
    <script src="../source/js/semantic.min.js"></script>
</head>
<body>
<script>
    var i = 0;
    var files = null;
    var url = null;

    function change(file) {
        files = file.files;
        let biData = [];
        biData.push(files[i]);
        url = window.URL.createObjectURL(new Blob(biData, {type: "application/zip"}));
        $('#originImage').attr('src', url);
    }

    function nextImage() {
        i += 1;
        if (i < files.length) {
            let biData = [];
            biData.push(files[i]);
            url = window.URL.createObjectURL(new Blob(biData, {type: "application/zip"}));
            $('#originImage').attr('src', url);
        }
    }

    function upload() {
        let formdata = new FormData();
        formdata.append(files[i].name, files[i]);
        formdata.append('name', files[i].name);
        $.ajax({
            url: "http://127.0.0.1:5000/upload_image",
            type: 'POST',
            cache: false,
            data: formdata,
            processData: false,
            contentType: false,
            success: function (datas) {
                <!--$('#outputImage').attr('src',datas['img_src']+'{{'+'}}');-->
            },
            error: function () {
                alert('error');
            }
        });
    }
</script>

<div class="ui attached menu" style="border: 0">
    <div class="ui container" style="border: 0">
        <a class="home" style="margin-top: 1%">
            <i class="home icon"></i> Home
        </a>
    </div>
</div>

<div class="ui two column doubling stackable grid container">

    <div class="column">
        <div class="ui fluid image">
            <div class="ui black ribbon label" style="z-index:100 "><i class="tag icon"></i> Input</div>
            <div class="ui special cards">
                <div class="card" style="width: 100%;">
                    <div class="blurring dimmable image">
                        <div class="ui dimmer">
                            <div class="content">
                                <div class="center">
                                    <div class="ui inverted button" onclick="addfile()">Select Images
                                        <input id="addfile" type="file" name="file"
                                               accept="image/jpeg, image/png, image/jpg" multiple="multiple"
                                               onchange="change(this)" style="display: none">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <img id="originImage" style="width: 100%;height: 100%" src="../source/img/img_1.jpg">
                    </div>
                    <div class="content">
                        <a class="header" style="cursor: unset;">
                            <div class="ui two column doubling stackable grid container">
                                <div class="column">
                                    <p style="cursor: pointer;width: 34%;margin: 0 33%" onclick="upload()">UPLOAD</p>
                                </div>
                                <div class="column">
                                    <p style="cursor: pointer;width: 34%;margin: 0 33%" onclick="nextImage()">NEXT</p>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="extra content">
                        <a style=";width: 34%; margin: 0 40%"><i class="users icon"></i> IMAGE </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="column">
        <div class="ui fluid image">
            <div class="ui fluid image">
                <div class="ui black ribbon label" style="z-index:100 "><i class="tag icon"></i> Output</div>
                <div class="ui special cards">
                    <div class="card" style="width: 100%">
                        <div class="">
                            <img class="big" id="outputImage" style="width: 100%;height: 100%"
                                 src="../source/img/default.png">
                        </div>
                        <div class="content">
                            <a class="header" style="cursor: unset;">
                                <div class="ui two column doubling stackable grid container">
                                    <div class="column">
                                        <p style="cursor: pointer;width: 34%;margin: 0 33%;visibility: hidden">UPLOAD</p>
                                    </div>
                                    <div class="column">
                                        <p style="cursor: pointer;width: 34%;margin: 0 33%;visibility: hidden">NEXT</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="extra content">
                            <a style=";width: 34%; margin: 0 40%"><i class="users icon"></i> IMAGE </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="ui container">
        <div class="ui black ribbon label" style="z-index:100; position: relative;top: 50px;left: -15px;"><i
                class="tag icon"></i> Output
        </div>
        <table class="ui selectable celled table" style="font-size: x-large; text-align: center">
            <thead>
            <tr>
                <th>Property</th>
                <th>Value</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>image</td>
                <td>None</td>
            </tr>
            <tr>
                <td>image</td>
                <td>None</td>
            </tr>
            <tr>
                <td>image</td>
                <td>None</td>
            </tr>
            <tr>
                <td>image</td>
                <td>None</td>
            </tr>
            <tr>
                <td>image</td>
                <td>None</td>
            </tr>

            </tbody>
        </table>

    </div>
</div>

<script>
    $('.special.cards .image').dimmer({
        on: 'hover'
    });

    function addfile() {
        document.getElementById("addfile").click();
    }
</script>
</body>
</html>